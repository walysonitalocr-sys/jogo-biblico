<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogo B√≠blico ‚Äì √çtalo Rocha</title>
<style>
:root{
  --cor1:#0b4f8a;--cor2:#16a34a;--cor3:#f97316;--cor4:#7c3aed;
  --bg:var(--cor1);--text:#fff;--err:#ef4444;--ok:#16a34a;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif}
body{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,var(--bg),#2ea1ff);color:var(--text);transition:background .5s;overflow:hidden}
.app{width:90%;max-width:700px;background:rgba(0,0,0,.15);border-radius:16px;padding:25px;box-shadow:0 8px 30px rgba(0,0,0,.4);text-align:center}
h1{margin-bottom:10px;font-size:1.8rem}
button{padding:12px 18px;margin:6px;border:none;border-radius:10px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}
button:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,.25)}
.btn-option{background:#fff;color:#0b1726;width:100%;text-align:left}
.btn-option.correct{background:var(--ok);color:#fff;animation:pulse .5s}
.btn-option.wrong{background:var(--err);color:#fff;animation:shake .5s}
@keyframes pulse{50%{transform:scale(1.05)}}
@keyframes shake{25%{transform:translateX(-5px)}75%{transform:translateX(5px)}}
.progress{height:14px;background:rgba(255,255,255,.2);border-radius:10px;overflow:hidden;margin:10px 0}
.progress-bar{height:100%;width:0%;background:#ffb703;transition:width .4s}
.vidas{font-size:1.5rem;margin:8px 0}
.score{font-size:1.5rem;margin:5px}
.confetti{position:absolute;width:10px;height:10px;background:hsl(var(--hue),70%,60%);top:-20px;animation:fall 2s linear forwards;border-radius:50%}
@keyframes fall{to{transform:translateY(110vh)}}
.firework{position:absolute;width:6px;height:6px;border-radius:50%;pointer-events:none;z-index:10;animation:boom 1s forwards}
@keyframes boom{0%{transform:scale(0)}100%{transform:scale(25);opacity:0}}
.hidden{display:none}
.medal{font-size:2rem;margin:10px;}
</style>
</head>
<body>
<div class="app" id="app">
  <h1>Jogo B√≠blico de √çtalo Rocha</h1>
  <div id="gameArea"></div>
  <audio id="acerto" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>
  <audio id="erro"   src="https://actions.google.com/sounds/v1/cartoon/boing.ogg" preload="auto"></audio>
</div>

<script>
/* ----------  DADOS  ---------- */
const levels=[
  {id:'estudante',title:'Estudante'},
  {id:'publicador',title:'Publicador'},
  {id:'pioneiro',title:'Pioneiro'},
  {id:'superintendente',title:'Superintendente'}
];
const colors=['#0b4f8a','#16a34a','#f97316','#7c3aed'];

const questions={
  estudante:[
    {q:"Quem foi obediente a Jeov√° e construiu a arca?",opts:["Mois√©s","Abra√£o","No√©","Elias"],a:2,desc:"No√© foi instru√≠do por Jeov√° a construir a arca. (G√™nesis 6-9)"},
    {q:"Qual foi o sinal que Deus deu prometendo que nunca mais destruiria toda a terra?",opts:["Estrela","Arco-√≠ris","Pomba","Montanha"],a:1,desc:"O arco-√≠ris simboliza a promessa de Jeov√°. (G√™nesis 9:13-17)"},
    {q:"Quem recebeu as t√°buas com os Dez Mandamentos?",opts:["Mois√©s","Ar√£o","Elias","Josu√©"],a:0,desc:"Mois√©s recebeu as t√°buas no Monte Sinai. (√äxodo 31:18)"},
    {q:"Quem foi o primeiro homem criado por Jeov√°?",opts:["Ad√£o","Sete","Caim","Abel"],a:0,desc:"Ad√£o foi o primeiro homem criado por Jeov√°. (G√™nesis 2:7)"},
    {q:"Quem foi vendido por seus irm√£os e depois se tornou l√≠der no Egito?",opts:["Jos√©","Bala√£o","Efraim","No√©"],a:0,desc:"Jos√© se tornou governador no Egito. (G√™nesis 37, 41)"},
    {q:"Quem enfrentou o gigante Golias?",opts:["Davi","Sans√£o","Saul","Neemias"],a:0,desc:"Davi derrotou Golias confiando na ajuda de Jeov√°. (1 Samuel 17)"},
    {q:"Qual profeta foi engolido por um grande peixe?",opts:["Jonas","Am√≥s","Os√©ias","Joel"],a:0,desc:"Jonas foi engolido por um grande peixe. (Jonas 1:17)"},
    {q:"Qual rei pediu a Jeov√° sabedoria para governar Israel?",opts:["Saul","Salom√£o","Davi","Ezequias"],a:1,desc:"Salom√£o pediu sabedoria a Jeov√°. (1 Reis 3:9)"},
    {q:"Qual livro cont√©m muitos c√¢nticos e ora√ß√µes?",opts:["Prov√©rbios","Salmos","Lamenta√ß√µes","Ester"],a:1,desc:"O livro de Salmos cont√©m c√¢nticos e ora√ß√µes. (Salmos)"},
    {q:"Quem demonstrou grande f√© ao construir um altar para Jeov√°?",opts:["Abra√£o","Caim","Davi","Samuel"],a:0,desc:"Abra√£o construiu altares para Jeov√°. (G√™nesis 12:7-8)"}
  ]
};

/* ----------  ESTADO  ---------- */
let levelIdx=0, qIdx=0, score=0, lives=3;
let listaAtual=[];

/* ----------  UTILS ---------- */
const qs=s=>document.querySelector(s);
const ce=(t,s='')=>{const e=document.createElement(t);e.innerHTML=s;return e};
const randInt=(a,b)=>Math.floor(Math.random()*(b-a+1))+a;
const shuffle=a=>a.sort(()=>Math.random()-.5);

/* ----------  TELAS ---------- */
function goHome(){
  const ga=qs('#gameArea');
  ga.innerHTML=`
    <p>Recorde: <b>${localStorage.getItem('biblia-record')||0}</b></p>
    <button class="btn-option" onclick="startPhase()">Iniciar Jogo</button>
    <button class="btn-option" onclick="showSettings()">Configura√ß√µes</button>`;
}

function showSettings(){
  const ga=qs('#gameArea');
  ga.innerHTML=`
    <h3>Configura√ß√µes</h3>
    <button class="btn-option" onclick="if(confirm('Apagar recorde?')){localStorage.setItem('biblia-record',0);goHome()}">Zerar Recorde</button>
    <button class="btn-option" onclick="goHome()">Voltar</button>`;
}

/* ----------  IN√çCIO FASE ---------- */
function startPhase(){
  setColor();
  listaAtual=shuffle([...questions[levels[levelIdx].id]]);
  qIdx=0; lives=3; score=0;
  showQuestion();
}

function setColor(){document.body.style.setProperty('--bg',colors[levelIdx]);}

/* ----------  MOSTRAR PERGUNTA ---------- */
function showQuestion(){
  if(lives<=0){gameOver(false);return;}
  if(qIdx>=listaAtual.length){phaseComplete();return;}
  const q=listaAtual[qIdx];
  const ga=qs('#gameArea');
  ga.innerHTML=`
    <h3>Fase ${levelIdx+1} - ${levels[levelIdx].title}</h3>
    <div class="vidas">${'‚ù§Ô∏è'.repeat(lives)}${'ü§ç'.repeat(3-lives)}</div>
    <div class="progress"><div class="progress-bar" style="width:${(qIdx/listaAtual.length)*100}%"></div></div>
    <h3>${q.q}</h3>
    <div id="opts"></div>
    <div class="score">Pontos: ${score}</div>`;

  const opts=qs('#opts');
  q.opts.forEach((o,i)=>{
    const b=ce('button',o); b.className='btn-option'; b.onclick=()=>answer(i); opts.appendChild(b);
  });
}

/* ----------  RESPOSTA ---------- */
function answer(idx){
  const q=listaAtual[qIdx];
  const buttons=document.querySelectorAll('.btn-option');
  const correct=idx===q.a;
  buttons[idx].classList.add(correct?'correct':'wrong');
  if(!correct) buttons[q.a].classList.add('correct');
  if(correct)qs('#acerto').play();
  else{lives--;qs('#erro').play(); showExplanation(q.desc);}
  if(correct)score+=10;
  qIdx++;
  setTimeout(showQuestion,1000);
}

function showExplanation(text){
  const ga=qs('#gameArea');
  const div=ce('p',`<i>Dica: ${text}</i>`); ga.appendChild(div);
}

/* ----------  FASE COMPLETA ---------- */
function phaseComplete(){
  const ga=qs('#gameArea');
  let medal='';
  if(lives===3) medal='ü•á'; else if(lives===2) medal='ü•à'; else medal='ü•â';
  ga.innerHTML=`<h2>Parab√©ns! Fase ${levels[levelIdx].title} conclu√≠da! ${medal}</h2>
    <p id="finalScore">Pontua√ß√£o: ${score}</p>
    <button class="btn-option" onclick="nextPhase()">Pr√≥xima Fase</button>`;
}

function nextPhase(){
  levelIdx++;
  if(levelIdx>=levels.length){gameOver(true);return;}
  startPhase();
}

/* ----------  FIM DE JOGO ---------- */
function gameOver(win){
  const ga=qs('#gameArea');
  const record=localStorage.getItem('biblia-record')||0;
  if(score>record) localStorage.setItem('biblia-record',score);
  ga.innerHTML=`<h2>${win?'Voc√™ venceu todas as fases!':'Suas vidas acabaram!'}</h2>
    <p>Pontua√ß√£o Final: ${score}</p>
    <p>Recorde: <b>${Math.max(record,score)}</b></p>
    <button class="btn-option" onclick="goHome()">Voltar ao In√≠cio</button>`;
}

/* ----------  START ---------- */
goHome();
</script>
</body>
</html>
